$(function(){var n=0;$("body").on("click",".remove-requirement-row",function(){var i=$(this).closest("tbody"),t;$(this).closest("tr").remove();t=i.find("tr");n=0;t.length===0?$(".order-requirement-list").addClass("d-none"):t.each(function(){$(this).find("input").each(function(){var t=$(this).prop("id").match(/\d+/);$(this).prop("id",$(this).prop("id").replace(t,n));$(this).prop("name",$(this).prop("name").replace(t,n))});n++})});$("body").on("click",".add-requirement-button",function(){$($(this).data("target")).find("input:not(:checkbox),select, textarea").val("");$($(this).data("target")).find("input:checkbox").prop("checked",!1);var n=$($(this).data("target")).find("form:first");$($(this).data("target")).bindEnterKey("form:first input",".btn-default");n.find(".field-validation-error").addClass("field-validation-valid").removeClass("field-validation-error").html("")});$("body").on("click",".save-requirement",function(t){var i,r;t.preventDefault();$(this).parents(".modal-content").find("form").valid()&&(i=$("#baseRequirement").clone(),i.find("input").each(function(){$(this).prop("id",$(this).prop("id").replace("0",n));$(this).prop("name",$(this).prop("name").replace("0",n))}),n++,$(this).parents(".modal-content").find("input:not(:checkbox), select, textarea").each(function(){i.find("input[name$='"+$(this).prop("id")+"']").val($(this).val())}),$(this).parents(".modal-content").find("input:checkbox").each(function(){i.find("input[name$='"+$(this).prop("id")+"']").val($(this).is(":checked")?"true":"false")}),r=$("#RequirementIsRequired").is(":checked")?"Ja":"Nej",$(".order-requirement-table > tbody:last-child").append('<tr><td class="table-type-column">'+i.html()+$("#RequirementType option:selected").text()+'<\/td><td class="table-description-column">'+$("#RequirementDescription").val()+'<\/td><td class="table-is-required-column">'+r+'<\/td><td class="table-button-column fixed"><span class="glyphicon glyphicon-trash remove-requirement-row"><\/span><\/td><\/tr>'),$(".order-requirement-list").removeClass("d-none"),$("#addRequirement").modal("hide"))});$("body").on("change","#UseRankedInterpreterLocation",function(){$(this).is(":checked")?($(".required-InterpreterLocation").hide(),$(".ranked-InterpreterLocation").show(),$(".address-InterpreterLocation").show(),$(".off-site-information").show()):($(".required-InterpreterLocation").show(),$(".ranked-InterpreterLocation").hide(),$("#InterpreterLocationSelector").trigger("change"))});$("body").on("change","#AssignmentType",function(){$(this).val()==="OnSite"||$(this).val()==="OffSite"||$(this).val()==="OffSiteDesignatedLocation"?($("#UseRankedInterpreterLocation").is(":checked")&&$("#UseRankedInterpreterLocation").trigger("click"),$("#UseRankedInterpreterLocation").prop("disabled",!0),$("#InterpreterLocationSelector").val($(this).val()),$("#InterpreterLocationSelector").prop("disabled",!0)):($("#UseRankedInterpreterLocation").prop("disabled",!1),$("#InterpreterLocationSelector").val(""),$("#InterpreterLocationSelector").prop("disabled",!1));$("#InterpreterLocationSelector").trigger("change")});$("body").on("change","#InterpreterLocationSelector",function(){$(this).val()===null?($(".address-InterpreterLocation").hide(),$(".off-site-information").hide()):$(this).val()==="OffSite"?($(".address-InterpreterLocation").hide(),$(".off-site-information").show()):($(".address-InterpreterLocation").show(),$(".off-site-information").hide());$("#InterpreterLocation").val($(this).val())});$("ol.drag-panel").sortable({vertical:!0,pullPlaceholder:!0,group:"draggable",distance:20,onDrop:function(n,t,i){var r=$("<li/>").css({width:0,height:0});n.before(r);r.animate({height:n.height()});n.animate(r.position(),function(){r.detach();i(n,t);var u=1;n.closest("ol").find(".order-descriptor").each(function(){$(this).val(u++)})})},onDragStart:function(n,t,i){var r=n.offset(),u=t.rootGroup.pointer;adjustment={left:u.left-r.left,top:u.top-r.top};i(n,t)},onDrag:function(n,t){n.css({left:t.left-adjustment.left,top:t.top-adjustment.top})}})});