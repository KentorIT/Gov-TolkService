$(function(){function n(n){if(n.indexOf(":")===-1){var t=n.length-2;n=[n.slice(0,t),":",n.slice(t)].join("")}return n.length===4&&(n=["0",n].join("")),n}$.validator.addMethod("staywithin",function(n,i){var r=i.id.split("_")[0];return t(r,$(i).data("rule-otherproperty"),$("#"+$(i).data("rule-rulesetproperty")).val())},$.validator.format("Not within the provided time range"));var t=function(t,i,r){var p=new Date($("#"+i+"_StartDate").val()).toLocaleDateString("sv-SE"),o=$("#"+i+"_StartTime").val(),e=$("#"+i+"_EndTime").val(),l=o>e,w=new Date($("#"+i+"_StartDate").val()),v,y,s,b,h,c;w.setDate(w.getDate()+1);var k=w.toLocaleDateString("sv-SE"),a=new Date($("#"+t+"_StartDate").val()).toLocaleDateString("sv-SE"),u=n($("#"+t+"_StartTime").val()),f=n($("#"+t+"_EndTime").val());return r==="VersionOne"?!l&&p!==a||l&&p!==a&&a!==k?!1:l?p===a?u>=o&&(u<f||f<=e):u<e&&u<f&&f<=e:u>=o&&u<f&&f<=e:r==="VersionTwo"?(v=new Date($("#"+i+"_StartDate").val()),y=new Date(v),y.setHours(parseInt(o.split(":")[0]),parseInt(o.split(":")[1])),s=new Date(v),s.setDate(v.getDate()+(l?1:0)),s.setHours(parseInt(e.split(":")[0]),parseInt(e.split(":")[1])),b=new Date($("#"+t+"_StartDate").val()),h=new Date(b),h.setHours(parseInt(u.split(":")[0]),parseInt(u.split(":")[1])),c=new Date(b),u>f&&c.setDate(h.getDate()+1),c.setHours(parseInt(f.split(":")[0]),parseInt(f.split(":")[1])),s.getTime()-y.getTime()<c.getTime()-h.getTime())?!1:y.getTime()+3e5>c.getTime()?!1:s.getTime()-3e5<h.getTime()?!1:!0:!1};$("body").on("change",".staywithin-fields input",function(){$("#"+$(this).data("staywithin-validator")).valid()})});