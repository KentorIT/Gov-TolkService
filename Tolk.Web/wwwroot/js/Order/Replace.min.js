$(function(){function n(n){if(n.indexOf(":")===-1){var t=n.length-2;n=[n.slice(0,t),":",n.slice(t)].join("")}return n.length===4&&(n=["0",n].join("")),n}$.validator.addMethod("staywithin",function(n,i){var r=i.id.split("_")[0];return t(r,$(i).data("rule-otherproperty"))},$.validator.format("Not within the provided time range"));var t=function(t,i){var o=new Date($("#"+i+"_StartDate").val()).toLocaleDateString("sv-SE"),s=$("#"+i+"_StartTime").val(),f=$("#"+i+"_EndTime").val(),h=s>f,c=new Date($("#"+i+"_StartDate").val());c.setDate(c.getDate()+1);var l=c.toLocaleDateString("sv-SE"),e=new Date($("#"+t+"_StartDate").val()).toLocaleDateString("sv-SE"),r=n($("#"+t+"_StartTime").val()),u=n($("#"+t+"_EndTime").val());return!h&&o!==e||h&&o!==e&&e!==l?!1:h?o===e?r>=s&&(r<u||u<=f):r<f&&r<u&&u<=f:r>=s&&r<u&&u<=f};$("body").on("change",".staywithin-fields input",function(){$("#"+$(this).data("staywithin-validator")).valid()})});