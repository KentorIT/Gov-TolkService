$.fn.extend({wizard:function(n){var u=$(this),e=u.find(".wizard-step:not(.wizard-step-hidden)").length,t=$(".wizard").data("currentStep"),r=u.find(".wizard-step:not(.wizard-step-hidden)"),o=!1,i={nextHandler:function(){},onloadHandler:function(){},backHandler:function(){},wizardStepRendered:function(){},stepText:"Step {0} of {1}",shiftAnimationHide:function(n){n.hide()},shiftAnimationShow:function(n){n.show()},breadcrumbDivider:" | ",allowMultipleClick:!1,focusFirst:!0},v,l,f;n!==undefined&&(i=$.extend(i,n));var h=function(){var n,u,f;(t=$(".wizard").data("currentStep"),n=r.eq(t),u=r.eq(t-1),i.backHandler===null||(f=i.backHandler({LeavingPage:n,ArrivingPage:u}),f!==!1))&&(i.shiftAnimationHide(r.eq(t--)),i.shiftAnimationShow(r.eq(t)),$(".wizard").data("currentStep",t),s({LastPage:n,RenderedPage:u}))},a=function(n){var h,f,o;if(t=$(".wizard").data("currentStep"),h=r.eq(t),i.shiftAnimationHide(h),typeof n=="number"){if(n>e||n<0)throw"There are not "+n+" numbers of steps in this wizard";f=r.eq(n);i.shiftAnimationShow(f);t=n}else if(typeof n=="string"&&n.charAt(0)==="#"){if($(n).length===0)throw"There is no wizard-step with id "+n;for(f=$(n),i.shiftAnimationShow(f),t=0,o=0;o<e;o++)if(r.eq(o).is(n))break;else t++}else throw n+"is not recognized as an id nor a number";u.data("currentStep",t);s({LastPage:h,RenderedPage:f})},c=function(){var n,f,o;(t=$(".wizard").data("currentStep"),n=r.eq(t),f=r.eq(t+1),i.nextHandler===null||(o=i.nextHandler({PreviousStep:t,NextStep:t+1,LeavingPage:n,ArrivingPage:f,IsLastPage:t+1===e}),o!==!1))&&t+1!==e&&(t++,i.shiftAnimationHide(n),i.shiftAnimationShow(f),u.data("currentStep",t),s({LastPage:n,RenderedPage:f}))},s=function(n){var f,h,o,s;t=$(".wizard").data("currentStep");r=u.find(".wizard-step:not(.wizard-step-hidden)");t===0?u.find(".wizard-back-button").hide():u.find(".wizard-back-button").show();f=r.eq(t).data("forward-button-text");f===undefined&&(f=$(".wizard").data("forward-button-text"));h=!1;$(".wizard-forward-button").find("*").each(function(){$(this).text().length>0&&($(this).text(f),h=!0)});h||u.find(".wizard-forward-button").text(f);i.focusFirst&&(o=r.eq(t).find("select, input:not(:hidden), textarea").first(),o.is("select")?o.focus():(o.focus(),o.select()));s=r.eq(t).data("step-header");s=s!==undefined?" - "+s:"";u.find(".wizard-step-label").text(i.stepText.replace("{0}",(t+1).toString()).replace("{1}",e.toString())+s);i.wizardStepRendered!==undefined&&i.wizardStepRendered(n)};if($(".wizard").data("init")===undefined){v=u.data("forward-button-text");$(".wizard").data("currentStep",0);$(".wizard").data("init",!0);t=0;l=u.find(".wizard-breadcrumb");f=0;r.each(function(){var n=4232442663453+f,t;$(this).attr("data-step-breadcrumb-id",n);t=$(this).data("step-header")!==undefined?$(this).data("step-header"):f+1;l.append($("<div cursor='hand' id="+n+" class='wizard-breadcrumb-button'>"+t+"<\/div>"+(f===e-1?"":"<p>"+i.breadcrumbDivider+"<\/p>")));f++});$(".wizard-breadcrumb-button").on("click",function(n){var f,u;return $(this).data("notClickable")||(t=$(".wizard").data("currentStep"),f=r.eq(t),i.shiftAnimationHide(f),u=$("[data-step-breadcrumb-id= "+n.target.id+"]"),i.shiftAnimationShow(u),t=u.data("step"),$(".wizard").data("currentStep",t),s({LastPage:f,RenderedPage:u})),!1});if(f=0,r.each(function(){$(this).data("step",f).hide();f++}),r.eq(t).show(),u.find(".wizard-back-button").click(function(){(!o||i.allowMultipleClick)&&(o=!0,h(),o=!1)}),u.find(".wizard-forward-button").click(function(){(!o||i.allowMultipleClick)&&(o=!0,c(),o=!1)}),i.onloadHandler!==null)i.onloadHandler(event);s({LastPage:r.eq(t-1),RenderedPage:r.eq(t)})}return{goWizardNext:function(){return c()},goWizardBack:function(){return h()},goWizardStep:function(n){return a(n)}}}});