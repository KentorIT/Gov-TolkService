$(function(){function i(){$("#FullAnswer").is(":hidden")||$("#FullAnswer").is(":checked")?($(".full-answer-panel").show(),$("#Answer").show(),$("#Accept").hide(),$(".required-on-accept-panel").hide()):($(".full-answer-panel").hide(),$("#Answer").hide(),$("#Accept").show(),$(".required-on-accept-panel").show())}function r(){$("#InterpreterId option:selected").val()==="-1"?$("#new-interpreter").collapse("show"):($("#new-interpreter").collapse("hide"),validateInterpreter(".interpreter-panel",$("#InterpreterId").val(),$("#NewInterpreterOfficialInterpreterId").val(),$("#InterpreterCompetenceLevel").val(),$("#OrderId").val(),null,$("#InterpreterId option:selected").data("additional")==="Protected"))}function u(){$("#InterpreterLocation option:selected").val()==="OffSitePhone"||$("#InterpreterLocation option:selected").val()==="OffSiteVideo"||$("#InterpreterLocation option:selected").val()===""?$("#set-expected-travel-costs").collapse("hide"):$("#InterpreterLocation").val()==="OffSitePhone"||$("#InterpreterLocation").val()==="OffSiteVideo"?$("#set-expected-travel-costs").collapse("hide"):$("#set-expected-travel-costs").collapse("show")}function f(){var t,n,i;return!$("#LatestAnswerTimeForCustomer_Date").is(":visible")||$("#LatestAnswerTimeForCustomer_Hour").val()==""||$("#LatestAnswerTimeForCustomer_Minute").val()==""?!0:(t=new Date($("#LatestAnswerTimeForCustomer_Date").val()),t.setHours($("#LatestAnswerTimeForCustomer_Hour").val()),t.setMinutes($("#LatestAnswerTimeForCustomer_Minute").val()),n=$("#LatestAnswerTimeForCustomerValidator"),i=s(t),i.length>0)?(n.empty(),n.append(i),n.show(),!1):(n.empty(),n.hide(),!0)}function o(){return $("#DenyMessage").val().length>0?!0:!1}function s(n){var i=new Date($("#now").val()),t;return i-n==0||i>n?"Angiven sista svarstid har passerats":(t=new Date($("#OrderViewModel_StartAt").val().replace(" ","T").replace(" ","")),t-n==0||t<n)?"Sista svarstid ska vara innan uppdraget startar":""}var t=function(){$(".disable-at-required").attr("disabled",!1);$("input[id$='CanMeetRequirement']").each(function(){var n=$(this).is(":checked"),t=$("#"+$(this).attr("id").replace("CanMeetRequirement","IsRequired")).attr("value")==="True";t&&!n&&$(".disable-at-required").attr("disabled",!0)})},n,e;t();$("#InterpreterCompetenceLevel, #NewInterpreterOfficialInterpreterId").change(function(){validateInterpreter(".interpreter-panel",$("#InterpreterId").val(),$("#NewInterpreterOfficialInterpreterId").val(),$("#InterpreterCompetenceLevel").val(),$("#OrderId").val(),null,$("#InterpreterId option:selected").data("additional")==="Protected")});$(document).ready(function(){r();u();i()});$("#InterpreterId").change(function(){r()});$("body").on("click","input[name=SetLatestAnswerTimeForCustomer]",function(){$("#SetLatestAnswerTimeForCustomerValidator").hide();$(this).val()==="Yes"?$("#latestAnswerTimeForCustomer").show():$("#latestAnswerTimeForCustomer").hide()});$("body").on("change","#FullAnswer",function(){i()});$("#Answer").closest("form").on("submit",function(){if(!n()||!f())return!1;$("#Answer").disableOnSubmit()});$("#Change").closest("form").on("submit",function(){if(!n()||!f())return!1;$("#Change").disableOnSubmit()});$("#Decline").closest("form").on("submit",function(){if(!o())return!1;$("#Decline").disableOnSubmit()});$("body").on("click","#Accept",function(){var n=$(this).closest("form"),t=n.prop("action");n.prop("action",t.replace("/Answer","/Accept"));n.submit();$("#Accept").disableOnSubmit()});n=function(){return!$("#SetLatestAnswerTimeForCustomer").is(":visible")||$("[name=SetLatestAnswerTimeForCustomer]").filter(":checked").length>0?!0:($("#SetLatestAnswerTimeForCustomerValidator").show(),!1)};e=function(){if($("#OrderViewModel_StartAt").val()!==undefined){var n=new Date($("#OrderViewModel_StartAt").val().replace(" ","T").replace(" ",""));$("#LatestAnswerTimeForCustomer_Date").datepicker("setStartDate",new Date($("#now").val()).zeroTime());$("#LatestAnswerTimeForCustomer_Date").datepicker("setEndDate",n.zeroTime())}};e();$("#InterpreterLocation").change(function(){u()});$(".checkbox").change(function(){t()});$("body").on("click","#cancel-go-back",function(){document.referrer===""||document.referrer.indexOf("Login")>0?window.location.href=tolkBaseUrl+"Home/Index":history.back()})});