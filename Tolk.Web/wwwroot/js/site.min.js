function getAntiForgeryToken(){return $('input[name="__RequestVerificationToken"]').val()}function updateTime(){var n=new Date((new Date).getTime()+Number($("#now").attr("data-timetravel-milliseconds")));$("#now").val(n);$("#now_display").text(n.toLocaleString("sv-SE"))}function refreshCollapsibles(){$(".collapsible-section").each(function(){var n=$(this);n.hasClass("disabled")||($(n.attr("data-target")).hasClass("in")?(n.children("h1").children("i").remove(),$('<i class="glyphicon glyphicon-triangle-bottom" style="font-size:15px;margin-right:10px;"><\/i>').prependTo(n.children("h1"))):(n.children("h1").children("i").remove(),$('<i class="glyphicon glyphicon-triangle-right" style="font-size:15px;margin-right:10px;"><\/i>').prependTo(n.children("h1"))))})}function changeTab(n,t,i){var r=n.parentElement.className.indexOf("disabled")!==-1;r||i==="#"||$(i).html().trim().length!==0||($(i).html('<div class="text-align-center"><span class="loading-text">Laddar...<\/span><\/div>'),$.ajax({url:tolkBaseUrl+t,type:"GET",dataType:"html",success:function(n){$(i).html(n);$(".form-entry-information").tooltip();refreshCollapsibles()},error:function(n){alert(n)}}))}function changeRequisition(n,t,i){$(i).html('<div class="text-align-center"><span class="loading-text">Laddar...<\/span><\/div>');$.ajax({url:tolkBaseUrl+t,type:"GET",dataType:"html",success:function(n){$(i).html(n);$(".form-entry-information").tooltip();refreshCollapsibles()},error:function(n){alert(n)}})}var urlParams=undefined,datePickerOptions={language:"sv",calendarWeeks:!0,todayHighlight:!0,clearBtn:!0,orientation:"bottom",format:{toDisplay:function(n){return n.toISOString().slice(0,10)},toValue:function(n){return new Date(Date.customFormat(n))}}};$("#impersonation-select").change(function(){$("#impersonation-form").submit()});$("#timeTravelDatePicker").on("changeDate",function(){$("#timeTravelDate").val($("#timeTravelDatePicker").datepicker("getFormattedDate"))});$("#now").length===1&&(updateTime(),setInterval(updateTime,1e3));$.urlParam=function(n){var t=new RegExp("[?&]"+n+"=([^&#]*)").exec(window.location.href);return t!=null?decodeURI(t[1])||0:null};$(function(){var i="dirty",n,r,t;switch($.urlParam("tab")){case"requisition":$("#requisitionTab").length&&$("#requisitionTab").click();break;case"complaint":$("#complaintTab").length&&$("#complaintTab").click()}$(".form-entry-information").tooltip();$(".disable-on-click").closest("form").on("submit",function(){$(this).find(".disable-on-click").disableOnSubmit()});n=jQuery.extend({},datePickerOptions);n.startDate=new Date($("#now").val()).zeroTime();$(".datepicker").not(".order-datepicker .datepicker").datepicker(datePickerOptions);$(".order-datepicker .datepicker").datepicker(n);$(".date .input-group-addon").click(function(){$(this).prev().datepicker("show")});$(".input-daterange input").click(function(){$(this).datepicker("show")});Globalize&&$.validator&&($.validator.methods.number=function(n){return n===""||n==="0"||Globalize.parseFloat(n)},Globalize.culture("sv-SE"));$("form:not(.do-not-check-dirty)").areYouSure({dirtyClass:i,message:"Du har osparade ändringar!"});$("div.autofocus > input").first().focus();$(":button.do-not-check-dirty, a.do-not-check-dirty").on("click",function(){$("form").removeClass(i)});$("form.filter-form").on("change","select, input, textarea",function(){$(this).closest("form").submit()});$(".standard-table table").DataTable({searching:!1,order:[[0,"desc"]],language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Swedish.json"}});$(".sortable-only-table").DataTable({paging:!1,searching:!1,info:!1,dom:"rt",language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Swedish.json"},rowCallback:function(n){$(n).addClass("table-row")}});$(".searchable-only-table").DataTable({paging:!1,info:!1,searching:!0,sorting:!1,language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Swedish.json"}});r=function(n,t){var i=0;return function(){var r=this,u=arguments;clearTimeout(i);i=setTimeout(function(){n.apply(r,u)},t||0)}};t=function(n,i){return i<0?"":i===1?n:n+t(n,i-1)};$(".ajax-listing table").each(function(){var n=$(this),i=n.data("filter-selector");$.ajax({dataType:"json",url:n.data("ajax-column-definition"),success:function(u){var f=u,o=f.filter(function(n){return n.isIdColumn}),s=f.filter(function(n){return n.isLeftCssClassName}),e;n.html("<thead><tr>"+t("<th><\/th>",f.length)+"<\/tr><\/thead><tbody/>");e=n.DataTable({serverSide:!0,searching:!1,paging:!0,dom:"lrtip",autoWidth:!1,createdRow:function(t,i){if(n.hasClass("clickable-rows-with-action")){var r=n.data("click-action-url");r.indexOf("?")>-1?$(t).data("click-action-url",r.replace("?","/"+i[o[0].data]+"?")):$(t).data("click-action-url",r+"/"+i[o[0].data])}s.length>0&&$(t).find("td").eq(0).addClass(i[s[0].data])},ajax:{url:n.data("ajax-path"),type:"POST",data:function(n){$(i+" :input").each(function(){n[$(this).prop("name")]=$(this).is(":checkbox")?$(this).is(":checked")?"true":"false":$(this).val()})},error:function(){location.reload()}},columns:f,language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Swedish.json"}});$("body").on("change",i+" select, "+i+" input.datepicker, "+i+" :checkbox, "+i+" :radio",function(){e.draw()});$("body").on("keyup",i+" input:not(.datepicker, :checkbox, :radio)",r(function(){e.draw()},500))}})});$("body").on("click",".btn-datatable",function(n){n.stopPropagation()});$("select").each(function(){var n=$(this).parents().hasClass("allow-clear");$(this).selectWoo({minimumResultsForSearch:10,allowClear:n,language:"sv"}).on("select2:select select2:unselect unselect",function(){$(this).valid!==undefined&&$(this).valid()}).promise().done(function(){$(".select2-selection__placeholder").each(function(){$(this).parent().prop("title",$(this).text())})})});$("body").on("click","table.clickable-rows-with-action > tbody > tr > td",function(){var n=$(this).closest("tr");window.location.href=n.data("click-action-url")});$("body").on("click",".more-info-price",function(){$(this).closest(".wrap-price-info").find(".detail-price-info").collapse("toggle");$(this).text().indexOf("Visa")!==-1?$(this).html($(this).html().replace("Visa","Dölj")):$(this).html($(this).html().replace("Dölj","Visa"))});$("body").on("click",".table-price-toggle-price-info",function(){$(this).closest("tr.table-row").next("tr.table-price-row").find(".detail-price-info").collapse("toggle");$(this).text().indexOf("Visa")!==-1?$(this).html($(this).html().replace("Visa","Dölj")):$(this).html($(this).html().replace("Dölj","Visa"))});$("body").on("click",".collapsible-section",function(){var n=$(this);$(n.attr("data-target")).hasClass("in")?($(n.attr("data-target")).collapse("hide"),n.children("h2").children("span").removeClass("glyphicon-triangle-bottom"),n.children("h2").children("span").addClass("glyphicon-triangle-right")):($(n.attr("data-target")).collapse("show"),n.children("h2").children("span").removeClass("glyphicon-triangle-right"),n.children("h2").children("span").addClass("glyphicon-triangle-bottom"))});refreshCollapsibles()});$(document).ready(function(){$(".no-auto-complete").val("")});$.fn.extend({bindEnterKey:function(n,t,i){var r=i?$(i):$(this);$(this).find(n).off("keypress");$(this).find(n).on("keypress",function(n){(n.keyCode||n.which)===13&&(r.find(t).click(),n.preventDefault())})},toggleOccasionalField:function(n,t){var r=!1,i;if(Array.isArray(t)){for(i=0;i<t.length;++i)if($(this).hasValue(t[i])){r=!0;break}}else r=$(this).hasValue(t);r?n.show(200):n.hide(200)},hasValue:function(n){return $(this).is(":checkbox")?$(this).is(":checked")===n:$(this).val()==n},disable:function(){$(this).attr("disabled","disabled")},enable:function(){$(this).removeAttr("disabled")},disableOnSubmit:function(){$(this).disable();var n=$(this).closest("form").valid();n||$(this).enable()},tolkWizard:function(n){var t=$(".wizard"),i=$.extend({},n);n.validationFalseHandler=function(n){n.focusInvalid()};n.onloadHandler=function(){t.find(".wizard-step:not(.wizard-step-hidden)").each(function(){i.onloadHandler!==undefined&&i.onloadHandler()})};t.wizardFormValidation(n)},openDialog:function(){$(this).find("input:not(:checkbox,:hidden),select, textarea").val("");$(this).find("input:checkbox").prop("checked",!1);var n=$(this).find("form:first");$(this).bindEnterKey("form:first input",".btn-default");n.find(".field-validation-error").addClass("field-validation-valid").removeClass("field-validation-error").html("");$(this).modal({backdrop:"static"})}});