function updateTime(){var n=new Date((new Date).getTime()+Number($("#now").attr("data-timetravel-milliseconds")));$("#now").val(n);$("#now_display").text(n.toLocaleString("sv-SE"))}function refreshCollapsibles(){$(".collapsible-section").each(function(){var n=$(this);n.hasClass("disabled")||($(n.attr("data-target")).hasClass("in")?(n.children("h2").children("i").remove(),$('<i class="glyphicon glyphicon-triangle-bottom" style="font-size:15px;margin-right:10px;"><\/i>').prependTo(n.children("h2"))):(n.children("h2").children("i").remove(),$('<i class="glyphicon glyphicon-triangle-right" style="font-size:15px;margin-right:10px;"><\/i>').prependTo(n.children("h2"))))})}function changeTab(n,t,i){var r=n.parentElement.className.indexOf("disabled")!==-1;r||i==="#"||$(i).html().trim().length!==0||($(i).html('<div class="text-align-center"><span class="loading-text">Laddar...<\/span><\/div>'),$.ajax({url:tolkBaseUrl+t,type:"GET",dataType:"html",success:function(n){$(i).html(n);refreshCollapsibles()},error:function(n){alert(n)}}))}var urlParams=undefined,datePickerOptions={language:"sv",calendarWeeks:!0,todayHighlight:!0,clearBtn:!0,orientation:"bottom",format:{toDisplay:function(n){return n.toISOString().slice(0,10)},toValue:function(n){return new Date(Date.customFormat(n))}}};$("#impersonation-select").change(function(){$("#impersonation-form").submit()});$("#timeTravelDatePicker").on("changeDate",function(){$("#timeTravelDate").val($("#timeTravelDatePicker").datepicker("getFormattedDate"))});$("#now").length===1&&(updateTime(),setInterval(updateTime,1e3));$.urlParam=function(n){var t=new RegExp("[?&]"+n+"=([^&#]*)").exec(window.location.href);return t!=null?decodeURI(t[1])||0:null};$(function(){var t="dirty",n;switch($.urlParam("tab")){case"requisition":$("#requisitionTab").length&&$("#requisitionTab").click();break;case"complaint":$("#complaintTab").length&&$("#complaintTab").click()}$(".form-entry-information").tooltip();n=jQuery.extend({},datePickerOptions);n.startDate=new Date($("#now").val()).zeroTime();$(".datepicker").not(".order-datepicker .datepicker").datepicker(datePickerOptions);$(".order-datepicker .datepicker").datepicker(n);$(".date .input-group-addon").click(function(){$(this).prev().datepicker("show")});$(".input-daterange input").click(function(){$(this).datepicker("show")});Globalize&&$.validator&&($.validator.methods.number=function(n){return n===""||n==="0"||Globalize.parseFloat(n)},Globalize.culture("sv-SE"));$("form:not(.do-not-check-dirty)").areYouSure({dirtyClass:t,message:"Du har osparade ändringar!"});$("div.autofocus > input").first().focus();$(":button.do-not-check-dirty, a.do-not-check-dirty").on("click",function(){$("form").removeClass(t)});$("form.filter-form").on("change","select, input, textarea",function(){$(this).closest("form").submit()});$(".table-paging table").DataTable({searching:!1,order:[[0,"desc"]],language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Swedish.json"}});$(".startlist-table").DataTable({paging:!1,searching:!1,info:!1,language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Swedish.json"}});$("select").each(function(){var n=$(this).parents().hasClass("allow-clear");$(this).select2({minimumResultsForSearch:10,allowClear:n})});$("body").on("click","table.clickable-rows-with-action > tbody > tr > td",function(){var n=$(this).closest("tr");window.location.href=n.data("click-action-url")});$("body").on("click",".more-info-price",function(){$(this).closest(".wrap-price-info").find(".detail-price-info").collapse("toggle");$(this).text().indexOf("Visa")!==-1?$(this).html($(this).html().replace("Visa","Dölj")):$(this).html($(this).html().replace("Dölj","Visa"))});$("body").on("click",".collapsible-section",function(){var n=$(this);$(n.attr("data-target")).hasClass("in")?($(n.attr("data-target")).collapse("hide"),n.children("h3").children("span").removeClass("glyphicon-triangle-bottom"),n.children("h3").children("span").addClass("glyphicon-triangle-right")):($(n.attr("data-target")).collapse("show"),n.children("h3").children("span").removeClass("glyphicon-triangle-right"),n.children("h3").children("span").addClass("glyphicon-triangle-bottom"))});refreshCollapsibles()});$.fn.extend({bindEnterKey:function(n,t,i){var r=i?$(i):$(this);$(this).find(n).off("keypress");$(this).find(n).on("keypress",function(n){(n.keyCode||n.which)===13&&(r.find(t).click(),n.preventDefault())})},toggleOccasionalField:function(n,t){var r=!1,i;if(Array.isArray(t)){for(i=0;i<t.length;++i)if($(this).hasValue(t[i])){r=!0;break}}else r=$(this).hasValue(t);r?n.show(200):n.hide(200)},hasValue:function(n){return $(this).is(":checkbox")?$(this).is(":checked")===n:$(this).val()==n},tolkWizard:function(n){var t=$(".wizard"),i=$.extend({},n);n.validationFalseHandler=function(n){n.focusInvalid()};n.onloadHandler=function(){t.find(".wizard-step:not(.wizard-step-hidden)").each(function(){i.onloadHandler!==undefined&&i.onloadHandler()})};t.wizardFormValidation(n)}});