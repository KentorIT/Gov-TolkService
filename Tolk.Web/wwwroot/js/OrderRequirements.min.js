$(function(){function f(n){n.find("#RequirementDescription").val("");var t=n.find("form:first");n.bindEnterKey("form:first input",".btn-default");t.find(".field-validation-error").addClass("field-validation-valid").removeClass("field-validation-error").html("")}var n=0,t=0,r=$("#req").parents(".modal-content"),u=$("#des").parents(".modal-content"),e=function(){var t=$("#savedRequirements").find("tr");t.each(function(){var t=$("#baseRequirement").clone();t.find("input").each(function(){$(this).prop("id",$(this).prop("id").replace("0",n));$(this).prop("name",$(this).prop("name").replace("0",n))});$(this).find("td").each(function(){t.find("input[name$='"+$(this).prop("class")+"']").val($(this).html())});t.find("input[name$='RequirementIsRequired']").val("true");$(".order-requirement-table > tbody:last-child").append('<tr><td class="table-type-column">'+t.html()+$(this).find(".SavedReqTypeName").html()+'<\/td><td class="table-description-column">'+$(this).find(".RequirementDescription").html()+'<\/td><td class="table-button-column fixed"><span class="remove-requirement-row bold">&times;<\/span><\/td><\/tr>');n++});$(".order-requirement-list").removeClass("d-none")},o=function(){var n=$("#savedDesiredRequirements").find("tr");n.each(function(){var n=$("#baseDesiredRequirement").clone();n.find("input").each(function(){$(this).prop("id",$(this).prop("id").replace("0",t));$(this).prop("name",$(this).prop("name").replace("0",t))});$(this).find("td").each(function(){n.find("input[name$='"+$(this).prop("class")+"']").val($(this).html())});$(".order-desiredRequirement-table > tbody:last-child").append('<tr><td class="table-type-column">'+n.html()+$(this).find(".SavedReqTypeName").html()+'<\/td><td class="table-description-column">'+$(this).find(".DesiredRequirementDescription").html()+'<\/td><td class="table-button-column fixed"><span class="remove-desiredRequirement-row bold">&times;<\/span><\/td><\/tr>');t++});$(".order-desiredRequirement-list").removeClass("d-none")},i;e();o();$("body").on("click",".remove-requirement-row",function(){var i=$(this).closest("tbody"),t;$(this).closest("tr").remove();t=i.find("tr");n=0;t.length===0?$(".order-requirement-list").addClass("d-none"):t.each(function(){$(this).find("input").each(function(){var t=$(this).prop("id").match(/\d+/);$(this).prop("id",$(this).prop("id").replace(t,n));$(this).prop("name",$(this).prop("name").replace(t,n))});n++})});$("body").on("click",".remove-desiredRequirement-row",function(){var i=$(this).closest("tbody"),n;$(this).closest("tr").remove();n=i.find("tr");t=0;n.length===0?$(".order-desiredRequirement-list").addClass("d-none"):n.each(function(){$(this).find("input").each(function(){var n=$(this).prop("id").match(/\d+/);$(this).prop("id",$(this).prop("id").replace(n,t));$(this).prop("name",$(this).prop("name").replace(n,t))});t++})});$("body").on("click",".add-requirement-button",function(){var n=$($(this).data("target"));f(n);i(n.find("#RequirementType"),n.find("input[name$=Gender]").parents(".form-group"),n.find("#RequirementDescription").parents(".form-group"))});$("body").on("click",".add-desiredRequirement-button",function(){var n=$($(this).data("target"));f(n);i(n.find("#DesiredRequirementType"),n.find("input[name$=DesiredGender]").parents(".form-group"),n.find("#DesiredRequirementDescription").parents(".form-group"))});$("body").on("click",".save-requirement",function(t){var i,u,r;t.preventDefault();i=$(this).parents(".modal-content");i.find("#RequirementType option:selected").text()==="Tolkens kön"&&(u=i.find("input[type='Radio']").filter(":checked").val()==="Female"?"Kvinna":"Man",i.find("#RequirementDescription").val(u));i.find("form").valid()&&(r=$("#baseRequirement").clone(),r.find("input").each(function(){$(this).prop("id",$(this).prop("id").replace("0",n));$(this).prop("name",$(this).prop("name").replace("0",n))}),n++,i.find("input:not(:checkbox), select, textarea").each(function(){r.find("input[name$='"+$(this).prop("id")+"']").val($(this).val())}),i.find("input:checkbox").each(function(){r.find("input[name$='"+$(this).prop("id")+"']").val($(this).is(":checked")?"true":"false")}),$(".order-requirement-table > tbody:last-child").append('<tr><td class="table-type-column">'+r.html()+$("#RequirementType option:selected").text()+'<\/td><td class="table-description-column">'+$("#RequirementDescription").val()+'<\/td><td class="table-button-column fixed"><span class="remove-requirement-row bold">&times;<\/span><\/td><\/tr>'),$(".order-requirement-list").removeClass("d-none"),$("#addRequirement").modal("hide"))});i=function(n,t,i){n.val()==="Gender"?(t.show(),i.hide()):(t.hide(),i.show(),i.find("input").val(""))};$("body").on("click",".save-desiredRequirement",function(n){var i,u,r;n.preventDefault();i=$(this).parents(".modal-content");i.find("#DesiredRequirementType option:selected").text()==="Tolkens kön"&&(u=i.find("input[type='Radio']").filter(":checked").val()==="Female"?"Kvinna":"Man",i.find("#DesiredRequirementDescription").val(u));i.find("form").valid()&&(r=$("#baseDesiredRequirement").clone(),r.find("input").each(function(){$(this).prop("id",$(this).prop("id").replace("0",t));$(this).prop("name",$(this).prop("name").replace("0",t))}),t++,i.find("input:not(:checkbox), select, textarea").each(function(){r.find("input[name$='"+$(this).prop("id")+"']").val($(this).val())}),i.find("input:checkbox").each(function(){r.find("input[name$='"+$(this).prop("id")+"']").val($(this).is(":checked")?"true":"false")}),$(".order-desiredRequirement-table > tbody:last-child").append('<tr><td class="table-type-column">'+r.html()+$(this).parents(".modal-content").find("#DesiredRequirementType option:selected").text()+'<\/td><td class="table-description-column">'+$(this).parents(".modal-content").find("#DesiredRequirementDescription").val()+'<\/td><td class="table-button-column fixed"><span class="remove-desiredRequirement-row bold">&times;<\/span><\/td><\/tr>'),$(".order-desiredRequirement-list").removeClass("d-none"),$("#addDesiredRequirement").modal("hide"))});r.find("#RequirementType").on("change",function(){i(r.find("#RequirementType"),r.find("input[name$=Gender]").parents(".form-group"),r.find("#RequirementDescription").parents(".form-group"))});u.find("#DesiredRequirementType").on("change",function(){i(u.find("#DesiredRequirementType"),u.find("input[name$=DesiredGender]").parents(".form-group"),u.find("#DesiredRequirementDescription").parents(".form-group"))})});