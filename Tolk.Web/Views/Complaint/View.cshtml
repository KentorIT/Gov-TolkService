@model Tolk.Web.Models.ComplaintViewModel
@{
    ViewData["Title"] = "Reklamation";
}
<div class="row">
    <div class="col-sm-12">
        <h2>@ViewData["Title"]</h2>
        <div class="row">
            <div class="col-sm-4">
                <display-entry asp-for="Status" />
            </div>
            <div class="col-sm-4">
                <display-entry asp-for="CreatedBy" />
            </div>
            <div class="col-sm-4">
                <display-entry asp-for="CreatedAt" />
            </div>
        </div>
        <div class="row">
            <div class="col-sm-4">
                <display-entry asp-for="ComplaintType" />
            </div>
            <div class="col-sm-4">
                <display-entry asp-for="Message" />
            </div>
            <div class="col-sm-4">
                @if (!string.IsNullOrEmpty(Model.DisputeMessage))
                {
                    <display-entry asp-for="DisputeMessage" />
                }
                @if (!string.IsNullOrEmpty(Model.AnswerDisputedMessage))
                {
                    <display-entry asp-for="AnswerDisputedMessage" />
                }
            </div>
        </div>
        @if (Model.AllowAnwser)
        {
            <div class="row">
                <div class="col-sm-6">
                    <button class="btn btn-large decline-button btn-danger pull-left">Bestrid reklamation</button>
                </div>
                <div class="col-sm-6">
                    <form method="post" asp-action="Accept">
                        <input asp-for="ComplaintId" type="hidden" />
                        <button class="btn btn-large btn-success pull-right">Godta reklamation <span class="center-glyphicon glyphicon glyphicon-ok"></span></button>
                    </form>
                </div>
            </div>
        }
        @if (Model.AllowAnwserOnDispute)
        {
            <div class="row">
                <div class="col-sm-6">
                    <button class="btn btn-large refute-button btn-danger pull-left">Avslå bestridande</button>
                </div>
                <div class="col-sm-6">
                    <button class="btn btn-large accept-button btn-success pull-right">Godta bestridande <span class="center-glyphicon glyphicon glyphicon-ok"></span></button>
                </div>
            </div>
        }
    </div>
</div>
@await Html.PartialAsync("_EventLog", Model.EventLog, new ViewDataDictionary(ViewData) { { "header", "Reklamationshändelser" }, { "id", "EventLog_Complaints" } })
<div id="disputeMessageDialog" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Bestrid reklamation</h4>
            </div>
            <div class="modal-body">
                <form method="post" asp-action="Dispute" class="do-not-check-dirty">
                    <input type="hidden" name="ComplaintId" value="@Model.ComplaintId" />
                    <form-entry asp-for="DisputeMessage" />
                    <button type="button" class="btn btn-warning pull-left do-not-check-dirty" data-dismiss="modal">Avbryt</button>
                    <button type="submit" class="btn btn-default pull-right">Bestrid</button>
                    <br /><br />
                </form>
            </div>
            <div class="modal-footer">
            </div>
        </div>

    </div>
</div>
<div id="acceptDisputeMessageDialog" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Godta bestridande av reklamation</h4>
            </div>
            <div class="modal-body">
                <form method="post" asp-action="AcceptDispute" class="do-not-check-dirty">
                    <input type="hidden" name="ComplaintId" value="@Model.ComplaintId" />
                    <form-entry asp-for="AnswerDisputedMessage" />
                    <button type="button" class="btn btn-warning pull-left do-not-check-dirty" data-dismiss="modal">Avbryt</button>
                    <button type="submit" class="btn btn-default pull-right">Godta</button>
                    <br /><br />
                </form>
            </div>
            <div class="modal-footer">
            </div>
        </div>

    </div>
</div>
<div id="refuteMessageDialog" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Avslå bestridande av reklamation</h4>
            </div>
            <div class="modal-body">
                <form method="post" asp-action="Refute" class="do-not-check-dirty">
                    <input type="hidden" name="ComplaintId" value="@Model.ComplaintId" />
                    <form-entry asp-for="AnswerDisputedMessage" />
                    <button type="button" class="btn btn-warning pull-left do-not-check-dirty" data-dismiss="modal">Avbryt</button>
                    <button type="submit" class="btn btn-default pull-right">Avslå</button>
                    <br /><br />
                </form>
            </div>
            <div class="modal-footer">
            </div>
        </div>

    </div>
</div>
@section Scripts {
    <environment include="Development">
        <script src="~/js/Complaint/View.js" asp-append-version="true"></script>
    </environment>
    <environment exclude="Development">
        <script src="~/js/Complaint/View.min.js" asp-append-version="true"></script>
    </environment>
    @await Html.PartialAsync("_ValidationScriptsPartial")
}

