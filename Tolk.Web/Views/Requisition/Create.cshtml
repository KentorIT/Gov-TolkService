@model Tolk.Web.Models.RequisitionModel
@{
    ViewData["Title"] = "Skapa rekvisition";
}
<div class="row">
    <div class="col-md-8">
        <h2>@ViewData["Title"]</h2>
        <display-entry asp-for="OrderNumber" />
        <display-entry asp-for="BrokerName" />
        <display-entry asp-for="OrderCreatedBy" />
        <display-entry asp-for="RegionName" />
        <display-entry asp-for="CustomerReferenceNumber" />
        <display-entry asp-for="LanguageName" />
        <display-entry asp-for="InterpreterName" />
        @if (Model.PreviousRequisition != null)
        {
            <a href="@Url.Action("View", "Requisition", new { id = Model.PreviousRequisition.RequisitionId })">Se tidigare rekvisition</a>
        }
        <form method="post">
            <input asp-for="RequestId" type="hidden" />
            <input asp-for="CombinedMaxSizeAttachments" type="hidden" />
            <input asp-for="FileGroupKey" type="hidden" />
            @if (Model.PreviousRequisition != null)
            {
                <display-entry asp-for="PreviousRequisition.TimeWasteInfo" label-override="Tidigare angiven tidsspillan" />
            }
            <form-entry asp-for="TimeWasteNormalTime" />
            <form-entry asp-for="TimeWasteIWHTime" />
            <div id="wasteTimeValidator" class="d-none text-danger body"></div>
            <display-entry asp-for="ExpectedStartedAt" />
            @if (Model.PreviousRequisition != null)
            {
                <display-entry asp-for="PreviousRequisition.SessionStartedAt" label-override="Tidigare angiven starttid" />
            }
            <form-entry asp-for="SessionStartedAt" />
            <display-entry asp-for="ExpectedEndedAt" />
            @if (Model.PreviousRequisition != null)
            {
                <display-entry asp-for="PreviousRequisition.SessionEndedAt" label-override="Tidigare angiven sluttid" />
            }
            <form-entry asp-for="SessionEndedAt" />
            <display-entry asp-for="ExpectedTravelCosts" />
            @if (Model.PreviousRequisition != null)
            {
                <display-entry asp-for="PreviousRequisition.TravelCosts" label-override="Tidigare angiven resekostnad (exkl. moms)" />
            }
            <form-entry asp-for="TravelCosts" />
            <form-entry asp-for="Message" />
            <input asp-for="CombinedMaxSizeAttachments" type="hidden" />
            @await Html.PartialAsync("_FileList", new AttachmentListModel { AllowDelete = true, AllowDownload = true, AllowUpload = true, Files = Model.Files })
            <button id="create" type="submit" class="btn btn-default">Skapa</button>
            <a class="btn btn-warning pull-right do-not-check-dirty" asp-controller="Assignment" asp-action="List" asp-route-Status="ToBeReported">Avbryt</a>
        </form>
        <span id="basefile" class="d-none">
            <input asp-for="Files[0].Id" type="hidden" />
        </span>
    </div>
</div>
<div id="addFilesDialog" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Ladda upp filer</h4>
            </div>
            <div class="modal-body">
                <form method="post" enctype="multipart/form-data" asp-controller="Files" asp-action="Upload" id="files-uploader">
                    <div class="form-group">
                        <label class="control-label">Ladda upp en eller flera filer</label>
                        <input type="file" name="files" class="filestyle" data-icon="false" multiple accept=".DOC,.DOCX,.GIF,.JPG,.JPEG,.JIF,.PDF,.PNG,.PPT,.PPTX,.PPS,.RTF,.TIFF,.TIF,.TXT,.WMF,.XLS,.XLSX" />
                    </div>
                    <input id="GroupKey" name="GroupKey" type="hidden" />
                    <button type="button" class="btn upload-files">Ladda upp</button>
                    <button type="button" class="btn pull-right" data-dismiss="modal">Avbryt</button>
                </form>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <environment include="Development">
        <script src="~/js/Files.js" asp-append-version="true"></script>
        <script src="~/js/Requisition/Create.js" asp-append-version="true"></script>
    </environment>
    <environment exclude="Development">
        <script src="~/js/Files.min.js" asp-append-version="true"></script>
        <script src="~/js/Requisition/Create.min.js" asp-append-version="true"></script>
    </environment>
    @await Html.PartialAsync("_ValidationScriptsPartial")
}
