@model Tolk.Web.Models.RequisitionViewModel
<div class="row">
    <div class="col-sm-4">
        <br />
        <div class="@Model.ColorClassName">
            <display-entry asp-for="Status" />
        </div>
    </div>
    <div class="col-sm-4">
        <br />
        <display-entry asp-for="CustomerOrganizationName" />
    </div>
    <div class="col-sm-4">
        <br />
        <display-entry asp-for="CustomerReferenceNumber" />
    </div>
</div>
@if (!string.IsNullOrWhiteSpace(Model.DenyMessage))
{
    <div class="row">
        <div class="col-sm-6">
            <display-entry asp-for="DenyMessage"></display-entry>
        </div>
        @if (Model.AllowCreation)
        {
            <div class="col-sm-6">
                <a class="btn btn-large btn-danger pull-right" href="@Url.Action("Create", "Requisition", new { id = Model.RequestId })">Ersätt rekvisition</a>
            </div>
        }
    </div>
}

@await Html.PartialAsync("_RequisitionSummary", Model, new ViewDataDictionary(ViewData) { { "header", "Fakturaunderlag" } })
<div class="row">
    <div class="col-sm-12">
        @if (Model.AllowProcessing)
        {
            <form method="post" asp-controller="Requisition" asp-action="Approve">
                <input asp-for="RequisitionId" type="hidden" />
                <button class="btn btn-default btn-success btn-large pull-right">Godkänn <span class="center-glyphicon glyphicon glyphicon-ok"></span></button>
            </form>
            <button type="button" data-toggle="modal" data-target="#denyReqMessageDialog" class="btn btn-large btn-danger">Underkänn</button>
        }
    </div>
</div>
<div class="row">
    <div class="col-sm-12">
        @await Html.PartialAsync("_EventLog", Model.EventLog, new ViewDataDictionary(ViewData) { { "header", "Rekvisitionshändelser" }, { "id", "EventLog_Requisition" } })
    </div>
</div>
<div id="denyReqMessageDialog" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Underkänn rekvisition</h4>
            </div>
            <div class="modal-body">
                <form method="post" asp-action="Deny" class="do-not-check-dirty">
                    <input asp-for="RequisitionId" type="hidden" />
                    <form-entry asp-for="DenyMessage" />
                    <span id="denyRequisitionValidator" class="text-danger left-padding"></span>
                    <button type="submit" class="btn btn-default right-md-button do-not-check-dirty btn-deny-req">Underkänn</button>
                    <button type="button" class="btn btn-warning left-md-button do-not-check-dirty" data-dismiss="modal">Avbryt</button>
                    <br /><br />
                </form>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>