@model Tolk.Web.Models.RequisitionProcessModel
@{
    ViewData["Title"] = "Behandla rekvisition";
}

<div class="row">
    <div class="col-md-8">
        <h2>@ViewData["Title"]</h2>
        <display-entry asp-for="OrderNumber" />
        <display-entry asp-for="CreatedBy" />
        @if (Model.PreviousRequisition != null)
        {
            <a href="@Url.Action("View", "Requisition", new { id = Model.PreviousRequisition.RequisitionId })">Se tidigare rekvisition</a>
        }
        <display-entry asp-for="CreatedAt" />
        <display-entry asp-for="Status" />
        <display-entry asp-for="ExpectedStartedAt" />
        <display-entry asp-for="SessionStartedAt" />
        <display-entry asp-for="ExpectedEndedAt" />
        <display-entry asp-for="SessionEndedAt" />
        <display-entry asp-for="TotalRegisteredWasteTime" />
        <display-entry asp-for="ExpectedTravelCosts" />
        <display-entry asp-for="TravelCosts" />
        <display-entry asp-for="Message" />
        <display-entry asp-for="CalculatedPrice" />
        <display-entry asp-for="ResultingPrice" />
        <form method="post" asp-action="Approve">
            <input asp-for="RequisitionId" type="hidden" />
            <div class="row">
                <div class="col-xs-4">
                    <button class="btn btn-primary">Godkänn</button>
                </div>
                <div class="col-xs-4">
                    <button type="button" data-toggle="modal" data-target="#confirmDialog" class="btn btn-warning">Avbryt</button>
                </div>
                <div class="col-xs-4">
                    <button type="button" data-toggle="modal" data-target="#denyMessageDialog" class="btn btn-danger">Underkänn rekvisition</button>
                </div>
            </div>
        </form>
    </div>
</div>
@await Html.PartialAsync("_DenyMessageDialog", new DenyMessageDialogModel { Action = "Deny", DialogHeader = "Neka rekvisitionen", ParentId = Model.RequisitionId })
@await Html.PartialAsync("_ConfirmDialog", new ConfirmDialogModel { Action = "AbortToListProcess", Message = "Är du säker att du vill gå tillbaka?", DialogHeader = "Avbryt behandling av rekvisition" })
