@model AttachmentListModel
@{
    var visibleClass = Model.Files != null ? !Model.Files.Any() ? "d-none" : string.Empty : "d-none";
    var tableAddFilesClass = Model.AllowUpload ? "file-table-add" : string.Empty;
    var addAttachmentClass = Model.AllowUpload ? "add-attachment" : string.Empty;
}
@if (Model.AllowUpload)
{
    <label>Bifoga filer</label>
    <span class="form-entry-information glyphicon glyphicon-info-sign" title="För att bifoga en fil klicka på knappen Bifoga filer och följ sedan instruktionerna"></span>
    <br />
    <span class="more-info">@Model.Description</span>
    <br />
    <br />
    <a href="#" class="btn btn-warning" data-target="#addFilesDialog" data-toggle="modal" data-backdrop="static"><span class="glyphicon glyphicon-paperclip"></span> Bifoga filer</a>
}
<div class="file-list no-padding @visibleClass">
    <div class="table-responsive @addAttachmentClass">
        <label>@Model.Title</label>
        <table class="table table-attached-files table-hover file-table-view @tableAddFilesClass">
            <tbody>
                @if (Model.Files != null)
                {
                    @for (var i = 0; i < Model.Files.Count; ++i)
                    {
                        <tr data-id="@Model.Files[i].Id.ToString()" data-size="@Model.Files[i].Size.ToString()">
                            <td class="table-full-column">
                                <span class="glyphicon glyphicon-paperclip"></span>
                                <input asp-for="Files[i].Id" type="hidden" />
                                @Model.Files[i].FileName
                            </td>
                            @if (Model.AllowDelete)
                            {
                                <td class="table-button-column fixed">
                                    <span class="remove-file-row bold">&times;</span>
                                </td>
                            }
                        </tr>
                    }
                }
            </tbody>
        </table>
    </div>
</div>
