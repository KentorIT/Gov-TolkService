@model EventLogModel

@{
    string header = (string)ViewData["header"] ?? "Händelser";
    bool isCollapsible = (bool?)ViewData["isCollapsible"] ?? true;
    var divClass = isCollapsible ? "collapse" : "";
}
@if (isCollapsible)
{
    <a class="collapsible-section" data-toggle="collapse" data-target="#EventLog">
        <h3><span class="glyphicon glyphicon-triangle-right" style="font-size:15px;margin-right:10px;"></span> @header</h3>
    </a>
}
else
{
    <h2>@header</h2>
}
<hr />
<div id="EventLog" class="@divClass">
    <div class="table-responsive">
        @if (Model != null && Model.Entries.Any())
        {
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Tidpunkt</th>
                        <th>Händelse</th>
                        <th>Aktör</th>
                        <th>Organisation</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var entry in Model.Entries)
                    {
                        <tr>
                            <td>@entry.Timestamp.ToString("yyyy-MM-dd HH:mm")</td>
                            <td>@entry.EventDetails</td>
                            <td>@entry.Actor</td>
                            <td>@(string.IsNullOrEmpty(entry.Organization) ? "-" : entry.Organization)</td>
                        </tr>
                    }
                </tbody>
            </table>
        }
        else
        {
            <p>Inga händelser registrerade</p>
        }
    </div>
</div>