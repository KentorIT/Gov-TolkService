@model OrderModel

@{
    string isOrderDetailViewKey = "IsOrderDetailView";
    bool isOrderDetailView = (bool?)ViewData[isOrderDetailViewKey] ?? false;
    int? actionReplacingId = isOrderDetailView ? Model.ReplacingOrderId : Model.ActiveRequest.ReplacingOrderRequestId;
    int? actionReplacedById = isOrderDetailView ? Model.ReplacedByOrderId : Model.ActiveRequest.ReplacedByOrderRequestId;
}
@if (!string.IsNullOrEmpty(Model.ActiveRequest.ViewedByUser))
{
    <span class="glyphicon glyphicon-user redcolor" title="@Model.ActiveRequest.ViewedByUser"> </span><span class="normal-weight redcolor"> @Model.ActiveRequest.ViewedByUser</span>
    <br /><br />
}
<div class="row">
    <div class="col-sm-3">
        @if (isOrderDetailView)
        {
            <div class="@Model.ColorClassName">
                <display-entry asp-for="Status" />
            </div>
        }
        else
        {
            <div class="@Model.ActiveRequest.ColorClassName">
                <display-entry asp-for="ActiveRequest.Status" />
            </div>
        }
    </div>
    <div class="col-sm-3">
        @{string location = string.Empty;
            if (Model.InterpreterLocationAnswer != 0)
            {
                location = " - " + Tolk.BusinessLogic.Utilities.EnumHelper.GetDescription(Model.InterpreterLocationAnswer);
            }
        }
        <display-entry asp-for="AssignmentType" text-append="@location" />
    </div>

    <div class="col-sm-3">

        <display-entry asp-for="OrderNumber" />

        @if (actionReplacingId.HasValue)
        {
            <span>
                (Ersätter <a href="@Url.Action("View", new { id = actionReplacingId })">@Model.ReplacingOrderNumber</a>)
            </span>
        }
        @if (actionReplacedById.HasValue)
        {
            <span>
                (Ersatt av <a href="@Url.Action("View", new { id = actionReplacedById})">@Model.ReplacedByOrderNumber</a>)
            </span>
        }
    </div>
    <div class="col-sm-3">
        @if (isOrderDetailView)
        {
            <display-entry asp-for="CreatedAt" />
        }
        else
        {
            <display-entry asp-for="ActiveRequest.CreatedAt" />
        }
    </div>
</div>